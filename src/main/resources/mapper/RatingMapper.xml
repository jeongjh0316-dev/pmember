<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.pmember.service.RatingMapper">

    <!-- ðŸ”¹ ìŒì‹ ë³„ì : ìŒì‹ ì´ë¦„ìœ¼ë¡œ foodmenu_idx ì°¾ê³  ê¸°ë¡í…Œì´ë¸”ì— INSERT -->
    <insert id="insertFoodRating">
        INSERT INTO p_food_recommendation (id, foodmenu_idx, foodmenu_ratings)
        SELECT
        #{id},
        f.foodmenu_idx,
        #{rating}
        FROM p_foodmenu f
        WHERE f.foodmenu_name = #{foodName}
        LIMIT 1
    </insert>

    <!-- ðŸ”¹ ìŒë£Œ ë³„ì : ìŒë£Œ ì´ë¦„ìœ¼ë¡œ beveragemenu_idx ì°¾ê³  ê¸°ë¡í…Œì´ë¸”ì— INSERT -->
    <insert id="insertBeverageRating">
        INSERT INTO p_beveragemenu_recommendation (id, beveragemenu_idx, beveragemenu_ratings)
        SELECT
        #{id},
        b.beveragemenu_idx,
        #{rating}
        FROM p_beveragemenu b
        WHERE b.beveragemenu_name = #{beverageName}
        LIMIT 1
    </insert>

</mapper>
